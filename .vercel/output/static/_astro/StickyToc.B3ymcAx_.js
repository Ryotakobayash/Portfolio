import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.WFquGv8Z.js";function h({toc:o}){const[a,g]=d.useState("");return d.useEffect(()=>{const r=o.map(({id:e})=>document.getElementById(e)).filter(Boolean);if(r.length===0)return;const i=new IntersectionObserver(e=>{const s=e.filter(n=>n.isIntersecting);if(s.length>0){const n=s.reduce((l,c)=>l.boundingClientRect.top<c.boundingClientRect.top?l:c);g(n.target.id)}},{rootMargin:"-80px 0px -70% 0px",threshold:0});return r.forEach(e=>i.observe(e)),()=>{r.forEach(e=>i.unobserve(e))}},[o]),o.length===0?null:t.jsxs("nav",{style:{position:"sticky",top:"calc(var(--header-height) + var(--spacing-lg))",maxHeight:"calc(100vh - var(--header-height) - 2 * var(--spacing-lg))",overflowY:"auto",padding:"var(--spacing-md)",backgroundColor:"var(--color-bg-card)",borderRadius:"var(--radius-lg)",border:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--color-text-secondary)",marginBottom:"var(--spacing-md)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"目次"}),t.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:o.map(r=>t.jsx("li",{style:{paddingLeft:`${(r.level-2)*.75}rem`,marginBottom:"var(--spacing-xs)"},children:t.jsx("a",{href:`#${r.id}`,style:{display:"block",padding:"4px 8px",fontSize:"0.875rem",color:a===r.id?"var(--color-accent)":"var(--color-text-secondary)",textDecoration:"none",borderLeft:a===r.id?"2px solid var(--color-accent)":"2px solid transparent",backgroundColor:a===r.id?"var(--color-accent-light)":"transparent",borderRadius:"0 var(--radius-sm) var(--radius-sm) 0",transition:"all var(--transition-fast)"},children:r.text})},r.id))})]})}export{h as default};
